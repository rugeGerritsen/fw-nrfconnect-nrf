menu "Nordic BLE controller"

config BLECTLR_PRIO
	# Hidden option to set the priority of the controller threads
	int
	default BT_RX_PRIO if BT_HCI_HOST || BT_RECV_IS_RX_THREAD
	default 8

config BLECTLR_RX_STACK_SIZE
	int "Size of the receive thread stack"
	default 1024
	help
	  Size of the receiving thread stack, used to retrieve HCI events and
	  data from the controller.

config BLECTLR_SIGNAL_STACK_SIZE
	int "Size of the signal handler thread stack"
	default 1024
	help
	  Size of the signal handler thread stack, used to process lower
	  priority signals in the controller.

comment "Multithreading behavior of BLE controller APIs"

config BLECTLR_SHARED_API_BLOCKING
	bool "Make API calls blocking if controller is busy."
	default y
	help
		Public API calls such as Crypto and HCI APIs will block
		if called by multiple threads simultaneously. Only one thread
		can access the APIs at a time.

choice BLECTLR_SHARED_API_BLOCKING_BEHAVIOR
	prompt "Choose blocking behavior"
	bool
	depends on BLECTLR_SHARED_API_BLOCKING

config BLECTLR_SHARED_API_BLOCKING_WITH_TIMEOUT
	bool "Block with timeout."

config BLECTLR_SHARED_API_BLOCKING_FOREVER
	bool "Block for forever."

endchoice

config BLECTLR_API_BLOCKING_TIMEOUT_VALUE
	int "Timeout value, in milliseconds, for the mutex lock."
	depends on BLECTLR_SHARED_API_BLOCKING_WITH_TIMEOUT
	default 10
	help
		Timeout interval for the BLE controller API which was blocked due to simultaneous access.
		Timeout value of 0 is same as having non blocking behavior.


# The BLE controller library variants are defined in nrfxlib, here we redefine
# the choice to 'import' them, so they appear in the same menu as the rest.

choice BLE_CONTROLLER_VARIANT
	prompt "BLE Controller variant"
	bool

endchoice

endmenu
